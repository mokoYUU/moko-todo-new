import{_ as j,r as p,a as q,j as E,o as F,M as b,A as t,Q,R as y,i as o,t as v,z as l,N as W,B as _,v as X,S as Y,T as G,U as H,y as J,V as K,W as V,X as O,Y as Z,C as ee,D as te,x as h}from"./Cm7jju5k.js";const x=i=>(ee("data-v-2d54c425"),i=i(),te(),i),le=x(()=>h("span",null,"完了",-1)),oe=x(()=>h("span",{class:"ml-2"},"削除",-1)),se={__name:"taskListPage",setup(i){const c=p(""),n=p([]),r=p("すべて"),{$db:u,$auth:d}=q(),C=async()=>{if(!c.value)return;if(!d.currentUser){console.error("ユーザーがログインしていません。"),alert("タスクを追加するにはログインが必要です。");return}const e=await K(y(u,"tasks"),{title:c.value,completed:!1,userId:d.currentUser.uid});n.value.push({id:e.id,title:c.value,completed:!1}),c.value=""},w=async()=>{if(!d.currentUser){console.error("ユーザーがログインしていません。");return}const e=await Q(y(u,"tasks"));n.value=e.docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.userId===d.currentUser.uid)},g=async e=>{e.completed=!e.completed;const s=V(u,"tasks",e.id);await O(s,{completed:e.completed})},S=async e=>{await Z(V(u,"tasks",e)),n.value=n.value.filter(s=>s.id!==e)},T=E(()=>r.value==="完了"?n.value.filter(e=>e.completed):r.value==="未完了"?n.value.filter(e=>!e.completed):n.value);return F(w),(e,s)=>{const U=o("v-text-field"),m=o("v-btn"),D=o("v-form"),f=o("v-card"),I=o("v-select"),B=o("v-list-item-title"),N=o("v-list-item-content"),k=o("v-icon"),$=o("v-list-item-action"),L=o("v-list-item"),M=o("v-list"),R=o("v-container"),z=o("v-main"),A=o("v-app");return v(),b(A,null,{default:t(()=>[l(z,null,{default:t(()=>[l(R,{class:"ma-5"},{default:t(()=>[l(f,{class:"pa-6 mb-6",elevation:"2"},{default:t(()=>[l(D,{onSubmit:W(C,["prevent"])},{default:t(()=>[l(U,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),label:"新しいタスクを入力",outlined:"",clearable:"",class:"mb-4",placeholder:"タスクを入力してください..."},null,8,["modelValue"]),l(m,{type:"submit",color:"primary",block:""},{default:t(()=>[_("タスクを追加")]),_:1})]),_:1})]),_:1}),l(I,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),items:["すべて","未完了","完了"],label:"タスクフィルター",outlined:"",class:"mt-4"},null,8,["modelValue"]),l(M,{class:"mt-4"},{default:t(()=>[(v(!0),X(G,null,Y(T.value,a=>(v(),b(L,{key:a.id,class:H(["my-2",a.completed?"task-completed":""])},{default:t(()=>[l(f,{class:"w-100 pa-4",elevation:"1"},{default:t(()=>[l(N,null,{default:t(()=>[l(B,null,{default:t(()=>[_(J(a.title),1)]),_:2},1024)]),_:2},1024),l($,null,{default:t(()=>[l(m,{icon:"",color:"success",class:"rounded-circle",onClick:P=>g(a)},{default:t(()=>[l(k,null,{default:t(()=>[_("mdi-check-circle-outline")]),_:1})]),_:2},1032,["onClick"]),le,l(m,{icon:"",color:"error",class:"rounded-circle",onClick:P=>S(a.id)},{default:t(()=>[l(k,null,{default:t(()=>[_("mdi-delete-circle-outline")]),_:1})]),_:2},1032,["onClick"]),oe]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}},ne=j(se,[["__scopeId","data-v-2d54c425"]]);export{ne as default};
