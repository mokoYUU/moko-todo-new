import{_ as E,r as p,a as F,j as L,o as Q,M as b,A as t,Q as W,R as y,i as o,t as v,z as l,N as X,B as _,v as Y,S as G,T as H,U as J,y as K,V as O,W as V,X as P,Y as Z,C as ee,D as te,x as h}from"./CQHisSLU.js";const x=i=>(ee("data-v-5db19fc2"),i=i(),te(),i),le=x(()=>h("span",null,"完了",-1)),oe=x(()=>h("span",{class:"ml-2"},"削除",-1)),se={__name:"tasks",setup(i){const c=p(""),n=p([]),r=p("すべて"),{$db:u,$auth:d}=F(),C=async()=>{if(!c.value)return;if(!d.currentUser){console.error("ユーザーがログインしていません。"),alert("タスクを追加するにはログインが必要です。");return}const e=await O(y(u,"tasks"),{title:c.value,completed:!1,userId:d.currentUser.uid});n.value.push({id:e.id,title:c.value,completed:!1}),c.value=""},w=async()=>{if(!d.currentUser){console.error("ユーザーがログインしていません。");return}const e=await W(y(u,"tasks"));n.value=e.docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.userId===d.currentUser.uid)},S=async e=>{e.completed=!e.completed;const s=V(u,"tasks",e.id);await P(s,{completed:e.completed})},T=async e=>{await Z(V(u,"tasks",e)),n.value=n.value.filter(s=>s.id!==e)},U=L(()=>r.value==="完了"?n.value.filter(e=>e.completed):r.value==="未完了"?n.value.filter(e=>!e.completed):n.value);return Q(w),(e,s)=>{const D=o("v-text-field"),m=o("v-btn"),I=o("v-form"),f=o("v-card"),g=o("v-select"),B=o("v-list-item-title"),N=o("v-list-item-content"),k=o("v-icon"),$=o("v-list-item-action"),M=o("v-list-item"),R=o("v-list"),z=o("v-container"),A=o("v-main"),j=o("v-app");return v(),b(j,null,{default:t(()=>[l(A,null,{default:t(()=>[l(z,{class:"ma-5"},{default:t(()=>[l(f,{class:"pa-6 mb-6",elevation:"2"},{default:t(()=>[l(I,{onSubmit:X(C,["prevent"])},{default:t(()=>[l(D,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),label:"新しいタスクを入力",outlined:"",clearable:"",class:"mb-4",placeholder:"タスクを入力してください..."},null,8,["modelValue"]),l(m,{type:"submit",color:"primary",block:""},{default:t(()=>[_("タスクを追加")]),_:1})]),_:1})]),_:1}),l(g,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),items:["すべて","未完了","完了"],label:"タスクフィルター",outlined:"",class:"mt-4"},null,8,["modelValue"]),l(R,{class:"mt-4"},{default:t(()=>[(v(!0),Y(H,null,G(U.value,a=>(v(),b(M,{key:a.id,class:J(["my-2",a.completed?"task-completed":""])},{default:t(()=>[l(f,{class:"w-100 pa-4",elevation:"1"},{default:t(()=>[l(N,null,{default:t(()=>[l(B,null,{default:t(()=>[_(K(a.title),1)]),_:2},1024)]),_:2},1024),l($,null,{default:t(()=>[l(m,{icon:"",color:"success",class:"rounded-circle",onClick:q=>S(a)},{default:t(()=>[l(k,null,{default:t(()=>[_("mdi-check-circle-outline")]),_:1})]),_:2},1032,["onClick"]),le,l(m,{icon:"",color:"error",class:"rounded-circle",onClick:q=>T(a.id)},{default:t(()=>[l(k,null,{default:t(()=>[_("mdi-delete-circle-outline")]),_:1})]),_:2},1032,["onClick"]),oe]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}},ne=E(se,[["__scopeId","data-v-5db19fc2"]]);export{ne as default};
